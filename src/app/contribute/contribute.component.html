<form [formGroup]="createPromptForms" (ngSubmit)="createPromptForms.valid && savePrompt()" #myForm="ngForm">

  <mat-form-field appearance="outline">
    <mat-label>Name</mat-label>
    <input matInput placeholder="A killer prompt for sales" formControlName="name">
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-label>Prompt</mat-label>
    <textarea matInput placeholder="Put prompt variables between [], eg: Act as persona [Persona]"
      formControlName="text"></textarea>
  </mat-form-field>

  <mat-form-field appearance="outline" *ngIf="categories$ != null">
    <mat-label>Category</mat-label>
    <mat-chip-grid #chipGrid aria-label="Fruit selection" formControlName="categories">
      <mat-chip-row *ngFor="let category of categories; let i=index" (removed)="remove(i)">
        {{category.name}}
        <button matChipRemove [attr.aria-label]="'remove ' + category.name">
          <mat-icon>cancel</mat-icon>
        </button>
      </mat-chip-row>
    </mat-chip-grid>
    <input type="text" placeholder="Software engineer" aria-label="Category" matInput [formControl]="categoryCtrl"
      multiple [matAutocomplete]="auto" [matChipInputFor]="chipGrid"
      [matChipInputSeparatorKeyCodes]="separatorKeysCodes" (matChipInputTokenEnd)="add($event)">
    <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete" [displayWith]="displayCategory"
      (optionSelected)="selected($event)">
      <mat-option *ngFor="let category of categories$ | async" [value]="category">
        {{category.name}}
      </mat-option>
    </mat-autocomplete>
  </mat-form-field>



  <button mat-button type="submit">
    Save my prompt
  </button>
</form>
